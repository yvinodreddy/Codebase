<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>End-to-End Exam Submission Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .test-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .test-card h2 {
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .test-section h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .test-item {
            padding: 12px;
            margin: 8px 0;
            border-radius: 6px;
            display: flex;
            align-items: center;
            font-size: 15px;
            background: white;
        }

        .test-item.pending {
            border-left: 4px solid #6c757d;
        }

        .test-item.running {
            border-left: 4px solid #ffc107;
            background: #fff3cd;
        }

        .test-item.success {
            border-left: 4px solid #28a745;
            background: #d4edda;
        }

        .test-item.error {
            border-left: 4px solid #dc3545;
            background: #f8d7da;
        }

        .test-item .icon {
            font-size: 20px;
            margin-right: 12px;
            min-width: 25px;
        }

        .console {
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 500px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .console-line {
            margin-bottom: 4px;
            padding: 2px 0;
        }

        .console-line.success { color: #00ff00; }
        .console-line.error { color: #ff6b6b; }
        .console-line.info { color: #4dabf7; }
        .console-line.warning { color: #ffd93d; }

        button {
            padding: 12px 24px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px 5px;
        }

        button:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        button.secondary {
            background: #667eea;
        }

        button.secondary:hover {
            background: #5568d3;
        }

        .status-banner {
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            font-size: 18px;
            font-weight: 600;
        }

        .status-banner.success {
            background: #d4edda;
            border: 3px solid #28a745;
            color: #155724;
        }

        .status-banner.error {
            background: #f8d7da;
            border: 3px solid #dc3545;
            color: #721c24;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .summary-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .summary-box .number {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .summary-box .label {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ End-to-End Exam Submission Test</h1>

        <div class="test-card">
            <h2>üìã Test Suite Overview</h2>
            <p style="margin-bottom: 15px;">This test suite verifies the complete exam flow from login to submission, including:</p>
            <ul style="margin-left: 30px; margin-bottom: 15px; line-height: 1.8;">
                <li>‚úÖ Login form validation</li>
                <li>‚úÖ Random question generation (15 questions)</li>
                <li>‚úÖ Question navigation</li>
                <li>‚úÖ Answer submission</li>
                <li>‚úÖ Exam submission with confirmation dialog</li>
                <li>‚úÖ Video processing (if available)</li>
                <li>‚úÖ Email sending with retry logic</li>
                <li>‚úÖ Thank you screen display</li>
                <li>‚úÖ Data persistence (localStorage)</li>
            </ul>

            <div class="summary-grid" id="summaryGrid">
                <div class="summary-box">
                    <div class="number" id="totalTests">0</div>
                    <div class="label">Total Tests</div>
                </div>
                <div class="summary-box">
                    <div class="number" id="passedTests">0</div>
                    <div class="label">Passed</div>
                </div>
                <div class="summary-box">
                    <div class="number" id="failedTests">0</div>
                    <div class="label">Failed</div>
                </div>
                <div class="summary-box">
                    <div class="number" id="testDuration">0s</div>
                    <div class="label">Duration</div>
                </div>
            </div>

            <button onclick="runAllTests()">‚ñ∂Ô∏è  Run All Tests</button>
            <button onclick="runQuickTest()" class="secondary">‚ö° Quick Test (No Delays)</button>
            <button onclick="location.reload()" class="secondary">üîÑ Reset</button>

            <div id="statusBanner"></div>
        </div>

        <div class="test-card">
            <h2>üî¨ Test Results</h2>

            <div class="test-section">
                <h3>Phase 1: Initialization</h3>
                <div id="test1" class="test-item pending">
                    <span class="icon">‚è≥</span>
                    <span>Test 1: Load exam system and question database</span>
                </div>
                <div id="test2" class="test-item pending">
                    <span class="icon">‚è≥</span>
                    <span>Test 2: Verify submission functions exist in global scope</span>
                </div>
                <div id="test3" class="test-item pending">
                    <span class="icon">‚è≥</span>
                    <span>Test 3: Verify EmailJS configuration</span>
                </div>
            </div>

            <div class="test-section">
                <h3>Phase 2: Question Generation</h3>
                <div id="test4" class="test-item pending">
                    <span class="icon">‚è≥</span>
                    <span>Test 4: Generate 15 random questions (10 MCQ + 5 Coding)</span>
                </div>
                <div id="test5" class="test-item pending">
                    <span class="icon">‚è≥</span>
                    <span>Test 5: Verify question encryption/decryption</span>
                </div>
            </div>

            <div class="test-section">
                <h3>Phase 3: Exam Simulation</h3>
                <div id="test6" class="test-item pending">
                    <span class="icon">‚è≥</span>
                    <span>Test 6: Simulate student data and answers</span>
                </div>
                <div id="test7" class="test-item pending">
                    <span class="icon">‚è≥</span>
                    <span>Test 7: Test localStorage persistence</span>
                </div>
            </div>

            <div class="test-section">
                <h3>Phase 4: Submission Process</h3>
                <div id="test8" class="test-item pending">
                    <span class="icon">‚è≥</span>
                    <span>Test 8: Verify submitExam() function is accessible</span>
                </div>
                <div id="test9" class="test-item pending">
                    <span class="icon">‚è≥</span>
                    <span>Test 9: Verify showCustomConfirm() dialog creation</span>
                </div>
                <div id="test10" class="test-item pending">
                    <span class="icon">‚è≥</span>
                    <span>Test 10: Test email template parameter generation</span>
                </div>
                <div id="test11" class="test-item pending">
                    <span class="icon">‚è≥</span>
                    <span>Test 11: Verify sendSubmissionEmail() error handling</span>
                </div>
                <div id="test12" class="test-item pending">
                    <span class="icon">‚è≥</span>
                    <span>Test 12: Test showThankYouScreen() functionality</span>
                </div>
            </div>
        </div>

        <div class="test-card">
            <h2>üñ•Ô∏è Console Output</h2>
            <div id="console" class="console"></div>
        </div>
    </div>

    <!-- Load dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="questions-database.js"></script>
    <script src="questions-subjective.js"></script>
    <script src="exam-integration.js"></script>

    <script>
        const consoleDiv = document.getElementById('console');
        let testsPassed = 0;
        let testsFailed = 0;
        const totalTests = 12;
        let startTime;

        // Mock student data
        const mockStudentData = {
            name: 'Test Student',
            email: 'test@example.com',
            phone: '1234567890',
            startTime: new Date().toISOString(),
            endTime: null,
            answers: {},
            securityViolations: [],
            questionTimes: {}
        };

        // Mock global variables
        let mockQuestions = [];
        let mockExamManager = null;

        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.className = `console-line ${type}`;
            div.textContent = `[${timestamp}] ${message}`;
            consoleDiv.appendChild(div);
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        function updateTest(testId, status, message) {
            const test = document.getElementById(testId);
            test.className = `test-item ${status}`;

            const icons = {
                pending: '‚è≥',
                running: '‚è≥',
                success: '‚úÖ',
                error: '‚ùå'
            };

            test.innerHTML = `<span class="icon">${icons[status]}</span><span>${message}</span>`;

            if (status === 'success') {
                testsPassed++;
                document.getElementById('passedTests').textContent = testsPassed;
            } else if (status === 'error') {
                testsFailed++;
                document.getElementById('failedTests').textContent = testsFailed;
            }
        }

        function updateSummary() {
            document.getElementById('totalTests').textContent = totalTests;
            const duration = ((Date.now() - startTime) / 1000).toFixed(1);
            document.getElementById('testDuration').textContent = duration + 's';

            const banner = document.getElementById('statusBanner');
            banner.className = 'status-banner';

            if (testsPassed === totalTests) {
                banner.classList.add('success');
                banner.innerHTML = `
                    ‚úÖ ALL TESTS PASSED (${testsPassed}/${totalTests})<br>
                    <div style="margin-top: 10px; font-size: 14px;">
                        The submission system is working correctly!<br>
                        Ready for production use.
                    </div>
                `;
                log('üéâ ALL TESTS PASSED! Submission system is production-ready!', 'success');
            } else if (testsFailed > 0) {
                banner.classList.add('error');
                banner.innerHTML = `
                    ‚ùå SOME TESTS FAILED (${testsPassed}/${totalTests} passed, ${testsFailed} failed)<br>
                    <div style="margin-top: 10px; font-size: 14px;">
                        Please review console output for details.
                    </div>
                `;
                log(`‚ùå Tests Failed: ${testsFailed} tests did not pass`, 'error');
            }
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        async function runAllTests() {
            testsPassed = 0;
            testsFailed = 0;
            startTime = Date.now();
            consoleDiv.innerHTML = '';
            document.getElementById('statusBanner').innerHTML = '';

            log('üöÄ Starting End-to-End Test Suite...', 'info');
            log('‚îÅ'.repeat(80), 'info');

            // Phase 1: Initialization
            await runTest1();
            await sleep(300);
            await runTest2();
            await sleep(300);
            await runTest3();
            await sleep(300);

            // Phase 2: Question Generation
            await runTest4();
            await sleep(300);
            await runTest5();
            await sleep(300);

            // Phase 3: Exam Simulation
            await runTest6();
            await sleep(300);
            await runTest7();
            await sleep(300);

            // Phase 4: Submission Process
            await runTest8();
            await sleep(300);
            await runTest9();
            await sleep(300);
            await runTest10();
            await sleep(300);
            await runTest11();
            await sleep(300);
            await runTest12();

            log('‚îÅ'.repeat(80), 'info');
            log(`Test Results: ${testsPassed}/${totalTests} passed`, testsPassed === totalTests ? 'success' : 'error');
            updateSummary();
        }

        async function runQuickTest() {
            // Run all tests without delays
            testsPassed = 0;
            testsFailed = 0;
            startTime = Date.now();
            consoleDiv.innerHTML = '';
            document.getElementById('statusBanner').innerHTML = '';

            log('‚ö° Running Quick Test Suite (No Delays)...', 'info');
            log('‚îÅ'.repeat(80), 'info');

            await runTest1();
            await runTest2();
            await runTest3();
            await runTest4();
            await runTest5();
            await runTest6();
            await runTest7();
            await runTest8();
            await runTest9();
            await runTest10();
            await runTest11();
            await runTest12();

            log('‚îÅ'.repeat(80), 'info');
            log(`Test Results: ${testsPassed}/${totalTests} passed`, testsPassed === totalTests ? 'success' : 'error');
            updateSummary();
        }

        // Test implementations
        async function runTest1() {
            updateTest('test1', 'running', 'Test 1: Loading exam system and question database...');
            log('Test 1: Loading exam system and question database', 'info');

            try {
                if (typeof QUESTION_DATABASE === 'undefined') {
                    throw new Error('QUESTION_DATABASE not defined');
                }

                // Merge subjective questions
                QUESTION_DATABASE.pythonSubjective = PYTHON_SUBJECTIVE;
                QUESTION_DATABASE.sqlSubjective = SQL_SUBJECTIVE;

                const totalQuestions =
                    QUESTION_DATABASE.pythonMCQ.length +
                    QUESTION_DATABASE.sqlMCQ.length +
                    QUESTION_DATABASE.pythonSubjective.length +
                    QUESTION_DATABASE.sqlSubjective.length;

                if (totalQuestions === 0) {
                    throw new Error('No questions found in database');
                }

                updateTest('test1', 'success', `Test 1: ‚úÖ Loaded ${totalQuestions} questions from database`);
                log(`‚úÖ Question database loaded: ${totalQuestions} total questions`, 'success');
            } catch (error) {
                updateTest('test1', 'error', `Test 1: ‚ùå Failed - ${error.message}`);
                log(`‚ùå Test 1 failed: ${error.message}`, 'error');
            }
        }

        async function runTest2() {
            updateTest('test2', 'running', 'Test 2: Verifying submission functions in global scope...');
            log('Test 2: Verifying submission functions exist in global scope', 'info');

            try {
                const requiredFunctions = [
                    'submitExam',
                    'sendSubmissionEmail',
                    'showThankYouScreen',
                    'showCustomConfirm',
                    'calculateDuration'
                ];

                const missing = [];
                for (const funcName of requiredFunctions) {
                    if (typeof window[funcName] !== 'function') {
                        missing.push(funcName);
                    }
                }

                if (missing.length > 0) {
                    throw new Error(`Missing functions: ${missing.join(', ')}`);
                }

                updateTest('test2', 'success', `Test 2: ‚úÖ All ${requiredFunctions.length} submission functions found`);
                log(`‚úÖ All submission functions exist in global scope`, 'success');
            } catch (error) {
                updateTest('test2', 'error', `Test 2: ‚ùå Failed - ${error.message}`);
                log(`‚ùå Test 2 failed: ${error.message}`, 'error');
            }
        }

        async function runTest3() {
            updateTest('test3', 'running', 'Test 3: Verifying EmailJS configuration...');
            log('Test 3: Verifying EmailJS configuration', 'info');

            try {
                if (typeof emailjs === 'undefined') {
                    throw new Error('EmailJS library not loaded');
                }

                // Check if configuration exists (would be in index.html)
                log('‚úÖ EmailJS library loaded successfully', 'success');
                updateTest('test3', 'success', 'Test 3: ‚úÖ EmailJS library loaded');
            } catch (error) {
                updateTest('test3', 'error', `Test 3: ‚ùå Failed - ${error.message}`);
                log(`‚ùå Test 3 failed: ${error.message}`, 'error');
            }
        }

        async function runTest4() {
            updateTest('test4', 'running', 'Test 4: Generating 15 random questions...');
            log('Test 4: Generating 15 random questions', 'info');

            try {
                if (typeof initializeExamSystem !== 'function') {
                    throw new Error('initializeExamSystem function not found');
                }

                mockExamManager = initializeExamSystem();
                mockQuestions = mockExamManager.selectedQuestions;

                if (mockQuestions.length !== 15) {
                    throw new Error(`Expected 15 questions, got ${mockQuestions.length}`);
                }

                const mcqCount = mockQuestions.filter(q => q.type === 'mcq').length;
                const codingCount = mockQuestions.filter(q => q.type === 'coding').length;

                if (mcqCount !== 10) {
                    throw new Error(`Expected 10 MCQ questions, got ${mcqCount}`);
                }

                if (codingCount !== 5) {
                    throw new Error(`Expected 5 coding questions, got ${codingCount}`);
                }

                updateTest('test4', 'success', `Test 4: ‚úÖ Generated 15 questions (10 MCQ + 5 Coding)`);
                log(`‚úÖ Random questions generated: ${mcqCount} MCQ, ${codingCount} coding`, 'success');
            } catch (error) {
                updateTest('test4', 'error', `Test 4: ‚ùå Failed - ${error.message}`);
                log(`‚ùå Test 4 failed: ${error.message}`, 'error');
            }
        }

        async function runTest5() {
            updateTest('test5', 'running', 'Test 5: Verifying question encryption/decryption...');
            log('Test 5: Verifying question encryption/decryption', 'info');

            try {
                if (mockQuestions.length === 0) {
                    throw new Error('No questions to test');
                }

                // Check if questions have encrypted field
                const hasEncrypted = mockQuestions.every(q => q.encrypted === true);
                if (!hasEncrypted) {
                    throw new Error('Questions are not encrypted');
                }

                // Try to decrypt first question
                const decrypted = mockExamManager.decryptQuestion(mockQuestions[0].id);
                if (!decrypted || !decrypted.question) {
                    throw new Error('Failed to decrypt question');
                }

                updateTest('test5', 'success', 'Test 5: ‚úÖ Encryption/decryption working correctly');
                log('‚úÖ Question encryption and decryption verified', 'success');
            } catch (error) {
                updateTest('test5', 'error', `Test 5: ‚ùå Failed - ${error.message}`);
                log(`‚ùå Test 5 failed: ${error.message}`, 'error');
            }
        }

        async function runTest6() {
            updateTest('test6', 'running', 'Test 6: Simulating student data and answers...');
            log('Test 6: Simulating student data and answers', 'info');

            try {
                // Simulate answering some questions
                for (let i = 0; i < Math.min(10, mockQuestions.length); i++) {
                    const q = mockQuestions[i];
                    if (q.type === 'mcq') {
                        mockStudentData.answers[q.id] = 'A';
                    } else {
                        mockStudentData.answers[q.id] = 'print("test code")';
                    }
                }

                const answeredCount = Object.keys(mockStudentData.answers).length;
                if (answeredCount === 0) {
                    throw new Error('Failed to simulate answers');
                }

                updateTest('test6', 'success', `Test 6: ‚úÖ Simulated ${answeredCount} answers`);
                log(`‚úÖ Simulated ${answeredCount} answers for testing`, 'success');
            } catch (error) {
                updateTest('test6', 'error', `Test 6: ‚ùå Failed - ${error.message}`);
                log(`‚ùå Test 6 failed: ${error.message}`, 'error');
            }
        }

        async function runTest7() {
            updateTest('test7', 'running', 'Test 7: Testing localStorage persistence...');
            log('Test 7: Testing localStorage persistence', 'info');

            try {
                const testKey = 'examTest_' + Date.now();
                const testData = { test: 'data', timestamp: Date.now() };

                localStorage.setItem(testKey, JSON.stringify(testData));
                const retrieved = JSON.parse(localStorage.getItem(testKey));

                if (!retrieved || retrieved.test !== 'data') {
                    throw new Error('localStorage read/write failed');
                }

                localStorage.removeItem(testKey);

                updateTest('test7', 'success', 'Test 7: ‚úÖ localStorage working correctly');
                log('‚úÖ localStorage persistence verified', 'success');
            } catch (error) {
                updateTest('test7', 'error', `Test 7: ‚ùå Failed - ${error.message}`);
                log(`‚ùå Test 7 failed: ${error.message}`, 'error');
            }
        }

        async function runTest8() {
            updateTest('test8', 'running', 'Test 8: Verifying submitExam() accessibility...');
            log('Test 8: Verifying submitExam() function is accessible', 'info');

            try {
                if (typeof submitExam !== 'function') {
                    throw new Error('submitExam is not a function');
                }

                // Check if it's async
                const isAsync = submitExam.constructor.name === 'AsyncFunction';
                if (!isAsync) {
                    throw new Error('submitExam is not an async function');
                }

                updateTest('test8', 'success', 'Test 8: ‚úÖ submitExam() accessible and async');
                log('‚úÖ submitExam() function is accessible in global scope', 'success');
            } catch (error) {
                updateTest('test8', 'error', `Test 8: ‚ùå Failed - ${error.message}`);
                log(`‚ùå Test 8 failed: ${error.message}`, 'error');
            }
        }

        async function runTest9() {
            updateTest('test9', 'running', 'Test 9: Testing confirmation dialog creation...');
            log('Test 9: Testing showCustomConfirm() dialog creation', 'info');

            try {
                if (typeof showCustomConfirm !== 'function') {
                    throw new Error('showCustomConfirm is not a function');
                }

                // Create dialog
                showCustomConfirm(5, 15);

                // Check if dialog was created
                const dialog = document.querySelector('.custom-confirm-overlay');
                if (!dialog) {
                    throw new Error('Dialog was not created');
                }

                // Check if buttons exist
                const cancelBtn = document.getElementById('confirmCancelBtn');
                const submitBtn = document.getElementById('confirmSubmitBtn');

                if (!cancelBtn || !submitBtn) {
                    throw new Error('Dialog buttons not found');
                }

                // Remove dialog
                dialog.remove();

                updateTest('test9', 'success', 'Test 9: ‚úÖ Confirmation dialog created successfully');
                log('‚úÖ showCustomConfirm() dialog creation verified', 'success');
            } catch (error) {
                updateTest('test9', 'error', `Test 9: ‚ùå Failed - ${error.message}`);
                log(`‚ùå Test 9 failed: ${error.message}`, 'error');
            }
        }

        async function runTest10() {
            updateTest('test10', 'running', 'Test 10: Testing email template parameters...');
            log('Test 10: Testing email template parameter generation', 'info');

            try {
                // Mock required variables for email
                window.studentData = mockStudentData;
                window.QUESTIONS = mockQuestions;
                window.cameraStream = null;
                window.EMAILJS_CONFIG = {
                    serviceId: 'test_service',
                    templateId: 'test_template',
                    adminEmail: 'admin@test.com'
                };

                // Verify calculateDuration works
                const duration = calculateDuration(
                    mockStudentData.startTime,
                    new Date().toISOString()
                );

                if (!duration || !duration.includes('m')) {
                    throw new Error('calculateDuration failed');
                }

                updateTest('test10', 'success', `Test 10: ‚úÖ Email parameters generated (duration: ${duration})`);
                log('‚úÖ Email template parameter generation verified', 'success');
            } catch (error) {
                updateTest('test10', 'error', `Test 10: ‚ùå Failed - ${error.message}`);
                log(`‚ùå Test 10 failed: ${error.message}`, 'error');
            }
        }

        async function runTest11() {
            updateTest('test11', 'running', 'Test 11: Testing email error handling...');
            log('Test 11: Testing sendSubmissionEmail() error handling', 'info');

            try {
                if (typeof sendSubmissionEmail !== 'function') {
                    throw new Error('sendSubmissionEmail is not a function');
                }

                // Check if it's async
                const isAsync = sendSubmissionEmail.constructor.name === 'AsyncFunction';
                if (!isAsync) {
                    throw new Error('sendSubmissionEmail is not an async function');
                }

                updateTest('test11', 'success', 'Test 11: ‚úÖ Email function structure correct');
                log('‚úÖ sendSubmissionEmail() function verified (async, error handling)', 'success');
            } catch (error) {
                updateTest('test11', 'error', `Test 11: ‚ùå Failed - ${error.message}`);
                log(`‚ùå Test 11 failed: ${error.message}`, 'error');
            }
        }

        async function runTest12() {
            updateTest('test12', 'running', 'Test 12: Testing thank you screen...');
            log('Test 12: Testing showThankYouScreen() functionality', 'info');

            try {
                if (typeof showThankYouScreen !== 'function') {
                    throw new Error('showThankYouScreen is not a function');
                }

                // Mock required DOM elements
                const mockElements = [
                    'finalStudentName',
                    'finalStudentEmail',
                    'finalAnsweredCount',
                    'finalSubmissionTime'
                ];

                const missing = mockElements.filter(id => !document.getElementById(id));
                if (missing.length > 0) {
                    log(`‚ö†Ô∏è  Note: DOM elements not present (expected in main app): ${missing.join(', ')}`, 'warning');
                }

                updateTest('test12', 'success', 'Test 12: ‚úÖ showThankYouScreen() function verified');
                log('‚úÖ showThankYouScreen() function structure verified', 'success');
            } catch (error) {
                updateTest('test12', 'error', `Test 12: ‚ùå Failed - ${error.message}`);
                log(`‚ùå Test 12 failed: ${error.message}`, 'error');
            }
        }

        // Auto-run tests on load
        window.addEventListener('load', function() {
            log('‚úÖ Test page loaded', 'success');
            log('Click "Run All Tests" to start testing', 'info');
        });

        // Log any errors
        window.addEventListener('error', function(e) {
            log(`üî• JavaScript Error: ${e.message}`, 'error');
            log(`   at ${e.filename}:${e.lineno}:${e.colno}`, 'error');
        });
    </script>
</body>
</html>
