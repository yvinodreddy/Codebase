@model List<RMMS.Models.PaddyProcurement>

@if (Model != null && Model.Any())
{
    <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover">
            <thead class="thead-dark">
                <tr>
                    <th>Voucher No</th>
                    <th>Date</th>
                    <th>Supplier</th>
                    <th>Variety</th>
                    <th>Grade</th>
                    <th>Quantity (kg)</th>
                    <th>Net Weight (kg)</th>
                    <th>Storage Location</th>
                    <th>Closing Stock (kg)</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.VoucherNumber</td>
                        <td>@item.ReceiptDate.ToString("dd-MMM-yyyy")</td>
                        <td>@item.SupplierName</td>
                        <td>@item.PaddyVariety</td>
                        <td>@(item.Grade ?? "-")</td>
                        <td class="text-right">@item.QuantityReceived.ToString("N2")</td>
                        <td class="text-right">@item.TotalNetWeight.ToString("N2")</td>
                        <td>@(item.StorageLocation ?? "-")</td>
                        <td class="text-right text-success">
                            <strong>@(item.ClosingStock?.ToString("N2") ?? "0.00")</strong>
                        </td>
                        <td>
                            <a asp-action="Details" asp-route-id="@item.Id" class="btn btn-sm btn-info" title="View Details">
                                <i class="fas fa-eye"></i>
                            </a>
                            <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-sm btn-warning" title="Edit">
                                <i class="fas fa-edit"></i>
                            </a>
                            <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-sm btn-danger"
                               onclick="return confirm('Are you sure you want to delete this record?');" title="Delete">
                                <i class="fas fa-trash"></i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
            <tfoot class="table-secondary">
                <tr>
                    <th colspan="5" class="text-right">TOTAL:</th>
                    <th class="text-right">@Model.Sum(x => x.QuantityReceived).ToString("N2")</th>
                    <th class="text-right">@Model.Sum(x => x.TotalNetWeight).ToString("N2")</th>
                    <th></th>
                    <th class="text-right text-success">
                        <strong>@Model.Sum(x => x.ClosingStock ?? 0).ToString("N2")</strong>
                    </th>
                    <th></th>
                </tr>
            </tfoot>
        </table>
    </div>

    <div class="mt-3">
        <p><strong>Total Records:</strong> @Model.Count</p>
    </div>
}
else
{
    <div class="alert alert-info text-center">
        <i class="fas fa-info-circle"></i>
        <p class="mb-0">No procurement records found.</p>
    </div>
}
