@model RMMS.Models.Sales.Inquiry
@{
    ViewData["Title"] = "Delete Inquiry";
}

<div class="container-fluid">
    <h2 class="text-danger"><i class="fas fa-exclamation-triangle"></i> Delete Inquiry</h2>
    <hr />

    <div class="alert alert-warning">
        <h5><i class="fas fa-exclamation-circle"></i> Warning</h5>
        <p>Are you sure you want to delete this inquiry? This action will mark the inquiry as inactive.</p>
    </div>

    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0">Inquiry to be Deleted</h5>
                </div>
                <div class="card-body">
                    <dl class="row">
                        <dt class="col-sm-4">Inquiry Number:</dt>
                        <dd class="col-sm-8"><strong class="text-primary">@Model.InquiryNumber</strong></dd>

                        <dt class="col-sm-4">Inquiry Date:</dt>
                        <dd class="col-sm-8">@Model.InquiryDate.ToString("dd MMMM yyyy")</dd>

                        <dt class="col-sm-4">Customer:</dt>
                        <dd class="col-sm-8">@Model.Customer?.CustomerName (@Model.Customer?.CustomerCode)</dd>

                        <dt class="col-sm-4">Product Type:</dt>
                        <dd class="col-sm-8">@Model.ProductType</dd>

                        <dt class="col-sm-4">Approximate Quantity:</dt>
                        <dd class="col-sm-8">@Model.ApproximateQuantity</dd>

                        <dt class="col-sm-4">Source:</dt>
                        <dd class="col-sm-8"><span class="badge bg-secondary">@Model.Source</span></dd>

                        <dt class="col-sm-4">Priority:</dt>
                        <dd class="col-sm-8">
                            @{
                                var priorityClass = Model.Priority switch
                                {
                                    "Urgent" => "bg-danger",
                                    "High" => "bg-warning",
                                    "Normal" => "bg-info",
                                    "Low" => "bg-secondary",
                                    _ => "bg-secondary"
                                };
                            }
                            <span class="badge @priorityClass">@Model.Priority</span>
                        </dd>

                        <dt class="col-sm-4">Status:</dt>
                        <dd class="col-sm-8">
                            @{
                                var statusClass = Model.Status switch
                                {
                                    "New" => "bg-primary",
                                    "In Progress" => "bg-warning",
                                    "Quoted" => "bg-info",
                                    "Converted" => "bg-success",
                                    "Lost" => "bg-danger",
                                    "Closed" => "bg-secondary",
                                    _ => "bg-secondary"
                                };
                            }
                            <span class="badge @statusClass">@Model.Status</span>
                        </dd>

                        <dt class="col-sm-4">Assigned To:</dt>
                        <dd class="col-sm-8">@(Model.AssignedToEmployee?.EmployeeName ?? "Not Assigned")</dd>

                        @if (!string.IsNullOrEmpty(Model.CustomerRequirements))
                        {
                            <dt class="col-sm-4">Customer Requirements:</dt>
                            <dd class="col-sm-8">@Model.CustomerRequirements</dd>
                        }

                        @if (!string.IsNullOrEmpty(Model.Remarks))
                        {
                            <dt class="col-sm-4">Remarks:</dt>
                            <dd class="col-sm-8">@Model.Remarks</dd>
                        }

                        @if (Model.FollowUpDate.HasValue)
                        {
                            <dt class="col-sm-4">Follow-Up Date:</dt>
                            <dd class="col-sm-8">@Model.FollowUpDate.Value.ToString("dd MMMM yyyy")</dd>
                        }

                        @if (Model.ConvertedToQuotationId.HasValue)
                        {
                            <dt class="col-sm-4">Converted To:</dt>
                            <dd class="col-sm-8">
                                <span class="badge bg-success">Quotation ID: @Model.ConvertedToQuotationId</span>
                            </dd>
                        }
                    </dl>

                    <hr />

                    <div class="row">
                        <div class="col-md-6">
                            <small class="text-muted">
                                <strong>Created:</strong> @Model.CreatedDate.ToString("dd MMM yyyy HH:mm")<br />
                                <strong>By:</strong> @Model.CreatedBy
                            </small>
                        </div>
                        @if (Model.ModifiedDate.HasValue)
                        {
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <strong>Modified:</strong> @Model.ModifiedDate.Value.ToString("dd MMM yyyy HH:mm")<br />
                                    <strong>By:</strong> @Model.ModifiedBy
                                </small>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card mb-3 border-danger">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0">Confirmation Required</h5>
                </div>
                <div class="card-body">
                    <form asp-action="DeleteConfirmed" method="post">
                        <input type="hidden" asp-for="Id" />
                        <div class="mb-3">
                            <p class="text-danger"><strong>This action cannot be undone!</strong></p>
                            <p>The inquiry will be marked as inactive and removed from active lists.</p>
                        </div>
                        <button type="submit" class="btn btn-danger w-100 mb-2">
                            <i class="fas fa-trash"></i> Yes, Delete Inquiry
                        </button>
                        <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-info w-100 mb-2">
                            <i class="fas fa-eye"></i> View Details
                        </a>
                        <a asp-action="Index" class="btn btn-secondary w-100">
                            <i class="fas fa-times"></i> No, Cancel
                        </a>
                    </form>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Important Notes</h5>
                </div>
                <div class="card-body">
                    <ul class="small">
                        <li>This is a soft delete - data is preserved</li>
                        <li>The inquiry will be marked as inactive</li>
                        <li>It will not appear in active inquiry lists</li>
                        <li>You can restore it from the database if needed</li>
                        <li>Related data (if any) will not be affected</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
